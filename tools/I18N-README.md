# 国际化语言包管理工具

本项目提供了一套完整的国际化语言包管理工具，用于解决多语言项目中常见的翻译同步问题。

## 主要功能

1. **语言包同步**：自动检测并同步不同语言之间的翻译键
2. **结构优化**：优化语言包结构，保持一致性
3. **翻译键提取**：从代码中提取翻译键并与语言包比对
4. **版本控制**：跟踪语言包的变更历史，支持版本回滚
5. **自动化集成**：通过 Git Hooks 和 npm 脚本实现自动化

## 安装依赖

```bash
npm install chalk glob
```

## 使用方法

### 命令行工具

我们提供了一个统一的命令行工具 `i18n-cli.js`，可以执行各种操作：

```bash
# 同步语言包
npm run i18n:sync

# 优化语言包结构
npm run i18n:optimize

# 从代码中提取翻译键
npm run i18n:extract

# 创建语言包快照
npm run i18n:snapshot

# 列出所有版本
npm run i18n:list

# 恢复到指定版本
npm run i18n:restore <timestamp>

# 执行所有操作
npm run i18n:all
```

### Git Hooks 集成

为了确保语言包始终保持同步，我们提供了 Git Hooks 集成：

1. 在每次提交代码前，会自动同步语言包
2. 在每次合并代码后，会自动执行所有操作

安装 Git Hooks：

```bash
node tools/setup-git-hooks.js
```

## 工作流程

### 开发过程中

1. 开发人员正常编写代码，使用 `t('key')` 或 `$t('key')` 等函数进行国际化
2. 提交代码前，pre-commit hook 会自动同步语言包
3. 如果有新的翻译键，会自动添加到所有语言包中

### 合并代码后

1. post-merge hook 会自动执行所有操作
2. 如果有变化，会自动创建一个新的提交

### 版本管理

1. 每次执行 `i18n:snapshot` 会创建一个语言包快照
2. 可以通过 `i18n:list` 查看所有版本
3. 可以通过 `i18n:restore` 恢复到指定版本

## 配置选项

每个工具都有自己的配置选项，可以在相应的 JS 文件中修改：

- `i18n-manager.js`：语言包同步配置
- `i18n-structure-optimizer.js`：结构优化配置
- `i18n-extractor.js`：翻译键提取配置
- `i18n-version-control.js`：版本控制配置

## 最佳实践

1. **定期执行同步**：即使有 Git Hooks，也建议定期手动执行 `npm run i18n:all`
2. **创建快照**：在重要的版本发布前，创建语言包快照
3. **代码审查**：在代码审查中关注国际化相关的变更
4. **翻译审核**：自动添加的翻译键可能需要人工审核和修正

## 常见问题

### 1. 自动添加的翻译不准确

自动添加的翻译只是一个占位符，通常是键的最后一部分。建议定期审核并修正这些翻译。

### 2. 合并冲突

如果多人同时修改语言包，可能会导致合并冲突。解决冲突后，建议执行 `npm run i18n:all` 确保语言包同步。

### 3. 性能问题

对于大型项目，语言包同步可能会比较耗时。可以考虑修改配置，只在必要时执行完整同步。

## 贡献

欢迎提交 Issue 和 Pull Request 来改进这套工具。
